<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1013.624017238617 728.9999847412109" width="1013.624017238617" height="728.9999847412109">
  <!-- svg-source:excalidraw -->
  
  <defs>
    <style class="style-fonts">
      @font-face {
        font-family: "Virgil";
        src: url("https://excalidraw.com/Virgil.woff2");
      }
      @font-face {
        font-family: "Cascadia";
        src: url("https://excalidraw.com/Cascadia.woff2");
      }
      @font-face {
        font-family: "Assistant";
        src: url("https://excalidraw.com/Assistant-Regular.woff2");
      }
    </style>
    
  </defs>
  <g transform="translate(38.992279052734375 10) rotate(0 205.7918701171875 30)"><text x="0" y="14.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">A 'deployment' file is generated for each federate. </text><text x="0" y="34.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="54.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text></g><g transform="translate(10 698.9999847412109) rotate(0 265.1998291015625 10)"><text x="0" y="14.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">A single 'service.yml' file is generated to set up kubernetes service</text></g><g transform="translate(44.60003662109375 79.39994812011719) rotate(0 49.53596496582031 10)"><text x="0" y="14.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">apiVersion: v1</text></g><g transform="translate(44.60003662109375 109.39994812011719) rotate(0 34.14397430419922 10)"><text x="0" y="14.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">kind: Pod</text></g><g transform="translate(44.60003662109375 139.3999481201172) rotate(0 40.975975036621094 10)"><text x="0" y="14.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">metadata:</text></g><g transform="translate(59.60003662109375 169.3999481201172) rotate(0 24.26397705078125 10)"><text x="0" y="14.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#f08c00" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">labels:</text></g><g transform="translate(74.60003662109375 199.3999481201172) rotate(0 40.36796569824219 10)"><text x="0" y="14.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#2f9e44" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">app: oedisi</text></g><g transform="translate(59.60003662109375 229.3999481201172) rotate(0 64.31195068359375 10)"><text x="0" y="14.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#f08c00" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">name: broker-pod</text></g><g transform="translate(44.60003662109375 259.3999481201172) rotate(0 18.615982055664062 10)"><text x="0" y="14.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">spec:</text></g><g transform="translate(59.60003662109375 289.3999481201172) rotate(0 41.62397766113281 10)"><text x="0" y="14.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#f08c00" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">containers:</text></g><g transform="translate(75.60003662109375 319.3999481201172) rotate(0 21.519989013671875 10)"><text x="0" y="14.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#2f9e44" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">- env:</text></g><g transform="translate(90.60003662109375 349.3999481201172) rotate(0 54.68797302246094 10)"><text x="0" y="14.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">- name: PORT</text></g><g transform="translate(105.60003662109375 379.3999481201172) rotate(0 51.39996337890625 10)"><text x="0" y="14.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">value: '8766'</text></g><g transform="translate(90.60003662109375 409.3999481201172) rotate(0 94.98393249511719 10)"><text x="0" y="14.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">- name: SERVICE_NAME</text></g><g transform="translate(105.60003662109375 439.3999481201172) rotate(0 77.46395111083984 10)"><text x="0" y="14.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">value: oedisi-service</text></g><g transform="translate(75.60003662109375 469.3999481201172) rotate(0 145.75189208984375 10)"><text x="0" y="14.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#2f9e44" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">image: aadillatif/oedisi_broker:latest</text></g><g transform="translate(75.60003662109375 499.3999481201172) rotate(0 48.095970153808594 10)"><text x="0" y="14.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#2f9e44" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">name: broker</text></g><g transform="translate(75.60003662109375 529.3999481201172) rotate(0 22.61597442626953 10)"><text x="0" y="14.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#2f9e44" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">ports:</text></g><g transform="translate(89.60003662109375 559.3999481201172) rotate(0 86.91194152832031 10)"><text x="0" y="14.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">- containerPort: 8766</text></g><g transform="translate(59.60003662109375 589.3999481201172) rotate(0 65.34395599365234 10)"><text x="0" y="14.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#f08c00" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">hostname: broker</text></g><g transform="translate(59.60003662109375 619.3999481201172) rotate(0 94.74393463134766 10)"><text x="0" y="14.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#f08c00" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">subdomain: oedisi-service</text></g><g transform="translate(241.056161403656 334.20001220703125) rotate(0 223.34388732910156 20)"><text x="0" y="14.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#9c36b5" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Service port is set up using the environment varible port</text><text x="0" y="34.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#9c36b5" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">(Consistant with docker compose implementation)</text></g><g stroke-linecap="round"><g transform="translate(231.80019521713257 352.6253085494611) rotate(0 -10.25903684260743 5.823414931583159)"><path d="M-0.38 -0.04 C-3.8 2.01, -17.29 9.84, -20.7 11.75 M0.42 -0.53 C-3.06 1.39, -17.6 8.76, -21.22 10.83" stroke="#9c36b5" stroke-width="2" fill="none"></path></g><g transform="translate(231.80019521713257 352.6253085494611) rotate(0 -10.25903684260743 5.823414931583159)"><path d="M-13.35 2.04 C-15.52 4.15, -17.45 6.35, -21.22 10.83 M-13.35 2.04 C-15.19 4.26, -17.44 6.29, -21.22 10.83" stroke="#9c36b5" stroke-width="2" fill="none"></path></g><g transform="translate(231.80019521713257 352.6253085494611) rotate(0 -10.25903684260743 5.823414931583159)"><path d="M-9.55 9.16 C-12.68 9.37, -15.62 9.69, -21.22 10.83 M-9.55 9.16 C-12.39 9.53, -15.61 9.72, -21.22 10.83" stroke="#9c36b5" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(192.40014028549194 108.00001525878906) rotate(0 159.2399139404297 20)"><text x="0" y="14.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#9c36b5" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Each federate runs in a separate pod. </text><text x="0" y="34.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#9c36b5" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text></g><g stroke-linecap="round"><g transform="translate(164.6001524925232 120.79998779296875) rotate(0 -14.399993896484375 0)"><path d="M-0.39 -0.5 C-5.07 -0.42, -23.88 0.15, -28.57 0.3 M0.41 0.44 C-4.28 0.37, -24.02 -0.36, -28.88 -0.52" stroke="#9c36b5" stroke-width="2" fill="none"></path></g><g transform="translate(164.6001524925232 120.79998779296875) rotate(0 -14.399993896484375 0)"><path d="M-15.19 -4.97 C-18.64 -3.81, -20.39 -2.88, -28.88 -0.52 M-15.19 -4.97 C-20.16 -3.52, -25.1 -1.79, -28.88 -0.52" stroke="#9c36b5" stroke-width="2" fill="none"></path></g><g transform="translate(164.6001524925232 120.79998779296875) rotate(0 -14.399993896484375 0)"><path d="M-15.53 4.87 C-18.9 4.03, -20.58 2.95, -28.88 -0.52 M-15.53 4.87 C-20.42 2.73, -25.24 0.86, -28.88 -0.52" stroke="#9c36b5" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(272.7936845872796 236.00001525878906) rotate(0 -34.8141692134858 4.000007629394531)"><path d="M-0.96 -1.06 C-6.35 0.31, -19.87 7.75, -31.24 8.8 C-42.62 9.86, -62.92 5.66, -69.2 5.26 M0.73 1 C-4.36 1.98, -17.13 6.19, -28.87 7.1 C-40.62 8.02, -63.17 6.96, -69.75 6.51" stroke="#9c36b5" stroke-width="2" fill="none"></path></g><g transform="translate(272.7936845872796 236.00001525878906) rotate(0 -34.8141692134858 4.000007629394531)"><path d="M-51.04 0.8 C-60.03 1.81, -64.29 5.79, -69.75 6.51 M-51.04 0.8 C-56.3 2.31, -62.38 3.77, -69.75 6.51" stroke="#9c36b5" stroke-width="2" fill="none"></path></g><g transform="translate(272.7936845872796 236.00001525878906) rotate(0 -34.8141692134858 4.000007629394531)"><path d="M-51.74 14.16 C-60.53 9.97, -64.51 8.74, -69.75 6.51 M-51.74 14.16 C-56.88 11.81, -62.75 9.41, -69.75 6.51" stroke="#9c36b5" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(289.8001036643982 221.5999755859375) rotate(0 104.4719467163086 10)"><text x="0" y="14.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#9c36b5" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Pod name should be unique</text></g><g transform="translate(193.72824239730835 175.99996948242188) rotate(0 150.64788818359375 10)"><text x="0" y="14.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#9c36b5" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Consistant across all deployment files</text></g><g stroke-linecap="round"><g transform="translate(185.2386844860505 194.87822464086008) rotate(0 -7.999969482421875 7.025091033820843)"><path d="M0.24 -0.39 C-2.45 1.93, -13.08 11.71, -15.8 14.21 M-0.3 0.61 C-3.07 2.73, -13.43 11.12, -16.12 13.32" stroke="#9c36b5" stroke-width="2" fill="none"></path></g><g transform="translate(185.2386844860505 194.87822464086008) rotate(0 -7.999969482421875 7.025091033820843)"><path d="M-10.65 4.19 C-12.98 7.7, -14.43 10.72, -16.12 13.32 M-10.65 4.19 C-12.88 7.81, -15.05 11.35, -16.12 13.32" stroke="#9c36b5" stroke-width="2" fill="none"></path></g><g transform="translate(185.2386844860505 194.87822464086008) rotate(0 -7.999969482421875 7.025091033820843)"><path d="M-6.06 9.84 C-10.06 11.32, -13.18 12.3, -16.12 13.32 M-6.06 9.84 C-10.13 11.19, -14.13 12.49, -16.12 13.32" stroke="#9c36b5" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(391.45621633529663 408.5999755859375) rotate(0 204.9678955078125 20)"><text x="0" y="14.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#9c36b5" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">This environment variable serves two purposes</text><text x="0" y="34.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#9c36b5" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">1. Used to identify if the co-simulation is running in </text></g><g stroke-linecap="round"><g transform="translate(378.20018911361694 445.2528018924486) rotate(0 -53.600006103515625 3.5472011593092247)"><path d="M-0.51 0.57 C-8.84 1.74, -31.91 8.03, -49.5 7.67 C-67.09 7.31, -96.6 -0.24, -106.06 -1.61 M1.42 -0.18 C-6.56 1.08, -29.21 8.9, -47.16 8.85 C-65.1 8.8, -96.51 1.46, -106.23 -0.48" stroke="#9c36b5" stroke-width="2" fill="none"></path></g><g transform="translate(378.20018911361694 445.2528018924486) rotate(0 -53.600006103515625 3.5472011593092247)"><path d="M-81.48 -4.03 C-88.92 -4.1, -99.4 0.17, -106.23 -0.48 M-81.48 -4.03 C-88.18 -3.37, -94.32 -2.16, -106.23 -0.48" stroke="#9c36b5" stroke-width="2" fill="none"></path></g><g transform="translate(378.20018911361694 445.2528018924486) rotate(0 -53.600006103515625 3.5472011593092247)"><path d="M-84.99 12.7 C-91.33 6.97, -100.61 5.56, -106.23 -0.48 M-84.99 12.7 C-90.87 8.83, -96.07 5.52, -106.23 -0.48" stroke="#9c36b5" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(435.00011587142944 456.79998779296875) rotate(0 202.27186584472656 20)"><text x="0" y="14.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#343a40" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">is_kubernetes_env = os.environ['SERVICE_NAME'] </text><text x="0" y="34.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#343a40" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">    if 'SERVICE_NAME' in os.environ else None</text></g><g transform="translate(392.2322325706482 504.79998779296875) rotate(0 291.423828125 10)"><text x="0" y="14.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#9c36b5" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">2. Used to automaticlly build URLs to communicate with other federates</text></g><g transform="translate(440.00011587142944 536.2000122070312) rotate(0 221.6478271484375 50)"><text x="0" y="14.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#343a40" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">if is_kubernetes_env:</text><text x="0" y="34.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#343a40" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">        SERVICE_NAME = os.environ['SERVICE_NAME']</text><text x="0" y="54.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#343a40" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">        url = f"http://{host}.{SERVICE_NAME}:{port}/"</text><text x="0" y="74.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#343a40" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">    else:</text><text x="0" y="94.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#343a40" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">        url = f"http://{host}:{port}/"</text></g><g transform="translate(627.0242400169373 651.4000396728516) rotate(0 142.91990661621094 10)"><text x="0" y="14.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Used for docker compose deployment</text></g><g transform="translate(753.0801787376404 608.8000335693359) rotate(0 125.27191925048828 10)"><text x="0" y="14.016" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Used for kubernetes deployment</text></g><g stroke-linecap="round"><g transform="translate(926.5942639303503 607.2000579833986) rotate(0 -18.99704046012448 -9.200012207031307)"><path d="M1.12 -0.85 C-0.32 -3.28, -3.33 -11.57, -9.82 -14.65 C-16.3 -17.73, -33.11 -18.78, -37.78 -19.33 M0.25 1.31 C-1.16 -1, -3.81 -10.36, -10.25 -13.66 C-16.7 -16.96, -33.9 -18.01, -38.43 -18.51" stroke="#e03131" stroke-width="2" fill="none"></path></g><g transform="translate(926.5942639303503 607.2000579833986) rotate(0 -18.99704046012448 -9.200012207031307)"><path d="M-25.07 -22 C-28.74 -20.05, -31.66 -20.22, -38.43 -18.51 M-25.07 -22 C-27.86 -21.45, -31.68 -20.71, -38.43 -18.51" stroke="#e03131" stroke-width="2" fill="none"></path></g><g transform="translate(926.5942639303503 607.2000579833986) rotate(0 -18.99704046012448 -9.200012207031307)"><path d="M-25.95 -12.6 C-29.44 -12.55, -32.18 -14.61, -38.43 -18.51 M-25.95 -12.6 C-28.56 -14.13, -32.19 -15.49, -38.43 -18.51" stroke="#e03131" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(774.4127020752089 650.4000396728517) rotate(0 -15.771945676810788 -6.600013732910213)"><path d="M-0.54 0.11 C-3.78 -0.65, -14.08 -2.3, -19.26 -4.59 C-24.45 -6.87, -29.6 -12.26, -31.64 -13.61 M0.18 -0.31 C-3.16 -1.01, -14.38 -1.94, -19.75 -4.09 C-25.12 -6.24, -30.1 -11.64, -32.04 -13.22" stroke="#e03131" stroke-width="2" fill="none"></path></g><g transform="translate(774.4127020752089 650.4000396728517) rotate(0 -15.771945676810788 -6.600013732910213)"><path d="M-24.95 -10.33 C-27.27 -11.42, -30.02 -12.39, -32.04 -13.22 M-24.95 -10.33 C-26.58 -11.07, -28.09 -11.5, -32.04 -13.22" stroke="#e03131" stroke-width="2" fill="none"></path></g><g transform="translate(774.4127020752089 650.4000396728517) rotate(0 -15.771945676810788 -6.600013732910213)"><path d="M-28.46 -6.45 C-29.6 -8.83, -31.16 -11.11, -32.04 -13.22 M-28.46 -6.45 C-29.3 -8.08, -30.02 -9.39, -32.04 -13.22" stroke="#e03131" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(387.8001341819763 470.40003967285156) rotate(0 -59.20001220703125 77.20001220703125)"><path d="M0.26 0.23 C-4.58 18.96, -8.49 87.73, -28.24 113.53 C-47.99 139.33, -103.35 148.04, -118.24 155.02 M-1.06 -0.7 C-6.15 18.2, -9.67 86.17, -29.31 111.79 C-48.96 137.41, -104.33 146.08, -118.92 153.01" stroke="#9c36b5" stroke-width="2" fill="none"></path></g><g transform="translate(387.8001341819763 470.40003967285156) rotate(0 -59.20001220703125 77.20001220703125)"><path d="M-99.18 137.66 C-105.92 142.95, -112.34 149.27, -118.92 153.01 M-99.18 137.66 C-107.01 143.04, -113.13 148.46, -118.92 153.01" stroke="#9c36b5" stroke-width="2" fill="none"></path></g><g transform="translate(387.8001341819763 470.40003967285156) rotate(0 -59.20001220703125 77.20001220703125)"><path d="M-93.94 153.94 C-102.76 153.25, -111.12 153.58, -118.92 153.01 M-93.94 153.94 C-103.72 153.64, -111.68 153.33, -118.92 153.01" stroke="#9c36b5" stroke-width="2" fill="none"></path></g></g><mask></mask></svg>